import Foundation
import SwiftUI

import Charts
import PlaygroundSupport


let fmt = ISO8601DateFormatter()

let rawData: [(date: String, size: Double)] = [
    ("2022-05-18T22:00:00Z",62067072),
    ("2022-05-19T22:00:00Z",62095985),
    ("2022-05-20T22:00:00Z",62095985),
    ("2022-05-21T22:00:00Z",62095985),
    ("2022-05-22T22:00:00Z",62095985),
    ("2022-05-23T22:00:00Z",62095985),
    ("2022-05-24T22:00:00Z",64303615),
    ("2022-05-25T22:00:00Z",64303615),
    ("2022-05-26T22:00:00Z",71049972),
    ("2022-05-27T22:00:00Z",71049972),
    ("2022-05-28T22:00:00Z",71049972),
    ("2022-05-29T22:00:00Z",71049972),
    ("2022-05-30T22:00:00Z",98074870),
    ("2022-05-31T22:00:00Z",410457314),
    ("2022-06-01T22:00:00Z",539651537),
    ("2022-06-02T22:00:00Z",599912022),
    ("2022-06-03T22:00:00Z",1071128157),
    ("2022-06-04T22:00:00Z",1402204678),
    ("2022-06-05T22:00:00Z",1465382334),
    ("2022-06-06T22:00:00Z",1522162712),
    ("2022-06-07T22:00:00Z",1572609785),
    ("2022-06-08T22:00:00Z",1794732164),
    ("2022-06-09T22:00:00Z",1866907725),
    ("2022-06-10T22:00:00Z",2373447926),
    ("2022-06-11T22:00:00Z",2391900522),
    ("2022-06-12T22:00:00Z",2410124968),
    ("2022-06-13T22:00:00Z",2412374483),
    ("2022-06-14T22:00:00Z",2425556033),
    ("2022-06-15T22:00:00Z",2485006275),
    ("2022-06-16T22:00:00Z",2497066219),
    ("2022-06-17T22:00:00Z",2502936565),
    ("2022-06-18T22:00:00Z",2505451892),
    ("2022-06-19T22:00:00Z",2531290206),
    ("2022-06-20T22:00:00Z",2622012072),
    ("2022-06-21T22:00:00Z",2630248182),
    ("2022-06-22T22:00:00Z",3002760657),
    ("2022-06-23T22:00:00Z",3065648663),
    ("2022-06-24T22:00:00Z",3203257511),
    ("2022-06-25T22:00:00Z",3207579087),
    ("2022-06-26T22:00:00Z",3351194195),
    ("2022-06-27T22:00:00Z",3369525868),
    ("2022-06-28T22:00:00Z",3469999267),
    ("2022-06-29T22:00:00Z",3635102641),
    ("2022-06-30T22:00:00Z",3702283205),
    ("2022-07-01T22:00:00Z",3718261980),
    ("2022-07-02T22:00:00Z",3731539990),
    ("2022-07-03T22:00:00Z",3751427172),
    ("2022-07-04T22:00:00Z",3804796044),
    ("2022-07-05T22:00:00Z",3902661093),
    ("2022-07-06T22:00:00Z",3954812029),
    ("2022-07-07T22:00:00Z",3967065177),
    ("2022-07-08T22:00:00Z",3971023525),
    ("2022-07-09T22:00:00Z",3971092757),
    ("2022-07-10T22:00:00Z",4008099409),
    ("2022-07-11T22:00:00Z",4008100453),
    ("2022-07-12T22:00:00Z",4051075253),
    ("2022-07-13T22:00:00Z",4074687668),
    ("2022-07-14T22:00:00Z",4090172237),
    ("2022-07-15T22:00:00Z",4155135847),
    ("2022-07-16T22:00:00Z",4162325072),
    ("2022-07-17T22:00:00Z",4164359403),
    ("2022-07-18T22:00:00Z",4205076451),
    ("2022-07-19T22:00:00Z",4209657893),
    ("2022-07-20T22:00:00Z",4229839240),
    ("2022-07-21T22:00:00Z",4299945223),
    ("2022-07-22T22:00:00Z",4299884337),
    ("2022-07-23T22:00:00Z",4304116680),
    ("2022-07-24T22:00:00Z",4307452202),
    ("2022-07-25T22:00:00Z",4311215480),
    ("2022-07-26T22:00:00Z",4323858865),
    ("2022-07-27T22:00:00Z",4323657894),
    ("2022-07-28T22:00:00Z",4379777253),
    ("2022-07-29T22:00:00Z",4386831179),
    ("2022-07-30T22:00:00Z",4400466824),
    ("2022-07-31T22:00:00Z",4435828562),
    ("2022-08-01T22:00:00Z",4445822840),
    ("2022-08-02T22:00:00Z",4445994369),
    ("2022-08-03T22:00:00Z",4524034191),
    ("2022-08-04T22:00:00Z",4524027652),
    ("2022-08-05T22:00:00Z",4534760674),
    ("2022-08-06T22:00:00Z",4641527164),
    ("2022-08-07T22:00:00Z",4710987244),
    ("2022-08-08T22:00:00Z",4736030648),
    ("2022-08-09T22:00:00Z",4795579657),
    ("2022-08-10T22:00:00Z",4828267125),
    ("2022-08-11T22:00:00Z",4832685924),
    ("2022-08-12T22:00:00Z",4851694897),
    ("2022-08-13T22:00:00Z",4851824765),
    ("2022-08-14T22:00:00Z",4897839834),
    ("2022-08-15T22:00:00Z",4947263834),
    ("2022-08-16T22:00:00Z",4965582397),
    ("2022-08-17T22:00:00Z",5005351851),
    ("2022-08-18T22:00:00Z",5005355437),
    ("2022-08-19T22:00:00Z",5038802843),
    ("2022-08-20T22:00:00Z",5038803937),
    ("2022-08-21T22:00:00Z",5043140147),
    ("2022-08-22T22:00:00Z",5063912133),
    ("2022-08-23T22:00:00Z",5101399779),
    ("2022-08-24T22:00:00Z",5258216535),
    ("2022-08-25T22:00:00Z",5368360524),
    ("2022-08-26T22:00:00Z",5379569236),
    ("2022-08-27T22:00:00Z",5448631009),
    ("2022-08-28T22:00:00Z",5494036496),
    ("2022-08-29T22:00:00Z",5537758890),
    ("2022-08-30T22:00:00Z",5590528184),
    ("2022-08-31T22:00:00Z",5606516330),
    ("2022-09-01T22:00:00Z",5616825188),
    ("2022-09-02T22:00:00Z",5742171866),
    ("2022-09-03T22:00:00Z",5763565462),
    ("2022-09-04T22:00:00Z",5794831760),
    ("2022-09-05T22:00:00Z",5868430742),
    ("2022-09-06T22:00:00Z",5948101431),
    ("2022-09-07T22:00:00Z",6030921298),
    ("2022-09-08T22:00:00Z",6158106052),
    ("2022-09-09T22:00:00Z",6537890289),
    ("2022-09-10T22:00:00Z",6568167667),
    ("2022-09-11T22:00:00Z",6683891491),
    ("2022-09-12T22:00:00Z",6837644319),
    ("2022-09-13T22:00:00Z",6990999395),
    ("2022-09-14T22:00:00Z",6991217706),
    ("2022-09-15T22:00:00Z",7077232326),
    ("2022-09-16T22:00:00Z",7231340780),
    ("2022-09-17T22:00:00Z",7294206538),
    ("2022-09-18T22:00:00Z",7383875618),
    ("2022-09-19T22:00:00Z",7626981742),
    ("2022-09-20T22:00:00Z",7788550364),
    ("2022-09-21T22:00:00Z",7792141357),
    ("2022-09-22T22:00:00Z",7798407144),
    ("2022-09-23T22:00:00Z",7840494398),
    ("2022-09-24T22:00:00Z",8182210231),
    ("2022-09-25T22:00:00Z",8217959066),
    ("2022-09-26T22:00:00Z",8357469073),
    ("2022-09-27T22:00:00Z",8472626007),
    ("2022-09-28T22:00:00Z",8486147260),
    ("2022-09-29T22:00:00Z",8516588677),
    ("2022-09-30T22:00:00Z",8527962999),
    ("2022-10-01T22:00:00Z",8538072450),
    ("2022-10-02T22:00:00Z",8547005655),
    ("2022-10-03T22:00:00Z",8617129636),
    ("2022-10-04T22:00:00Z",8738289018),
    ("2022-10-05T22:00:00Z",8764295839),
    ("2022-10-06T22:00:00Z",8769479862),
    ("2022-10-07T22:00:00Z",8822738600),
    ("2022-10-08T22:00:00Z",8864500998),
    ("2022-10-09T22:00:00Z",8978119835),
    ("2022-10-10T22:00:00Z",9095269643),
    ("2022-10-11T22:00:00Z",9205159410),
    ("2022-10-12T22:00:00Z",9248624702),
    ("2022-10-13T22:00:00Z",9280960251),
    ("2022-10-14T22:00:00Z",9293859871),
    ("2022-10-15T22:00:00Z",9309033421),
    ("2022-10-16T22:00:00Z",9314999813),
    ("2022-10-17T22:00:00Z",9335003569),
    ("2022-10-18T22:00:00Z",9436861782),
    ("2022-10-19T22:00:00Z",9578985739),
    ("2022-10-20T22:00:00Z",9600901986),
    ("2022-10-21T22:00:00Z",9635011795),
    ("2022-10-22T22:00:00Z",9817043961),
    ("2022-10-23T22:00:00Z",9864848636),
    ("2022-10-24T22:00:00Z",10006030903),
    ("2022-10-25T22:00:00Z",10182341664),
    ("2022-10-26T22:00:00Z",10249435678),
    ("2022-10-27T22:00:00Z",10331855589),
    ("2022-10-28T22:00:00Z",10358754041),
    ("2022-10-29T22:00:00Z",10460710823),
    ("2022-10-30T22:00:00Z",10516787512),
    ("2022-10-31T22:00:00Z",10653011281),
    ("2022-11-01T22:00:00Z",10689275044),
    ("2022-11-02T22:00:00Z",10717032955),
    ("2022-11-03T22:00:00Z",10754754052),
    ("2022-11-04T22:00:00Z",10914241304),
    ("2022-11-05T22:00:00Z",10914291430),
    ("2022-11-06T22:00:00Z",10919381303),
    ("2022-11-07T22:00:00Z",11068889184),
    ("2022-11-08T22:00:00Z",11313317817),
    ("2022-11-09T22:00:00Z",11375351430),
    ("2022-11-10T22:00:00Z",11428307138),
    ("2022-11-11T22:00:00Z",11531855239),
    ("2022-11-12T22:00:00Z",11531869847),
    ("2022-11-13T22:00:00Z",11546314170),
    ("2022-11-14T22:00:00Z",11546344993),
    ("2022-11-15T22:00:00Z",11603372583),
    ("2022-11-16T22:00:00Z",11794225643),
    ("2022-11-17T22:00:00Z",11794453015),
    ("2022-11-18T22:00:00Z",11830679751),
    ("2022-11-19T22:00:00Z",11845348285),
    ("2022-11-20T22:00:00Z",11861060466),
    ("2022-11-21T22:00:00Z",11929191618),
    ("2022-11-22T22:00:00Z",12012557323),
    ("2022-11-23T22:00:00Z",12065449738),
    ("2022-11-24T22:00:00Z",12150977948),
    ("2022-11-25T22:00:00Z",12243487154),
    ("2022-11-26T22:00:00Z",12426068687),
    ("2022-11-27T22:00:00Z",12640119992),
    ("2022-11-28T22:00:00Z",12850351958),
    ("2022-11-29T22:00:00Z",12914144022),
    ("2022-11-30T22:00:00Z",12927700339),
    ("2022-12-01T22:00:00Z",13016480740),
    ("2022-12-02T22:00:00Z",13143041529),
    ("2022-12-03T22:00:00Z",13229337524),
    ("2022-12-04T22:00:00Z",13304631958),
    ("2022-12-05T22:00:00Z",13413589513),
    ("2022-12-06T22:00:00Z",13419863649),
    ("2022-12-07T22:00:00Z",13439934956),
    ("2022-12-08T22:00:00Z",13501540113),
    ("2022-12-09T22:00:00Z",14400218900),
    ("2022-12-10T22:00:00Z",14412377299),
    ("2022-12-11T22:00:00Z",14412377299),
    ("2022-12-12T22:00:00Z",14423686133),
    ("2022-12-13T22:00:00Z",14485207129),
    ("2022-12-14T22:00:00Z",14507522508),
    ("2022-12-15T22:00:00Z",14535293389),
    ("2022-12-16T22:00:00Z",14658317093),
    ("2022-12-17T22:00:00Z",14658317093),
    ("2022-12-18T22:00:00Z",14664182541),
    ("2022-12-19T22:00:00Z",14680661470),
    ("2022-12-20T22:00:00Z",14747083599),
    ("2022-12-21T22:00:00Z",14767074670),
    ("2022-12-22T22:00:00Z",14774235870),
    ("2022-12-23T22:00:00Z",14835896014),
    ("2022-12-24T22:00:00Z",14890646253),
    ("2022-12-25T22:00:00Z",14947835673),
    ("2022-12-26T22:00:00Z",15009059173),
    ("2022-12-27T22:00:00Z",15185227258),
    ("2022-12-28T22:00:00Z",15225238067),
    ("2022-12-29T22:00:00Z",15341544263),
    ("2022-12-30T22:00:00Z",15424899497),
    ("2022-12-31T22:00:00Z",15505777803),
    ("2023-01-01T22:00:00Z",15548887852),
    ("2023-01-02T22:00:00Z",15627747687),
    ("2023-01-03T22:00:00Z",15778006491),
    ("2023-01-04T22:00:00Z",15993371479),
    ("2023-01-05T22:00:00Z",15993371479),
    ("2023-01-06T22:00:00Z",16375497799),
    ("2023-01-07T22:00:00Z",16553512333),
    ("2023-01-08T22:00:00Z",16608030548),
    ("2023-01-09T22:00:00Z",16820852728),
    ("2023-01-10T22:00:00Z",16916435790),
    ("2023-01-11T22:00:00Z",17079237582),
    ("2023-01-12T22:00:00Z",17260849984),
    ("2023-01-13T22:00:00Z",17374942940),
    ("2023-01-14T22:00:00Z",17384436560),
    ("2023-01-15T22:00:00Z",17825104092),
    ("2023-01-16T22:00:00Z",18079762751),
    ("2023-01-17T22:00:00Z",18178845923),
    ("2023-01-18T22:00:00Z",18252898858),
    ("2023-01-19T22:00:00Z",18276546691),
    ("2023-01-20T22:00:00Z",18382850919),
    ("2023-01-21T22:00:00Z",18387929370),
    ("2023-01-22T22:00:00Z",18469056577),
    ("2023-01-23T22:00:00Z",18590293447),
    ("2023-01-24T22:00:00Z",18732067065),
    ("2023-01-25T22:00:00Z",18862340823),
    ("2023-01-26T22:00:00Z",19049824780),
    ("2023-01-27T22:00:00Z",19034165916),
    ("2023-01-28T22:00:00Z",20199742505),
    ("2023-01-29T22:00:00Z",20202260786),
    ("2023-01-30T22:00:00Z",20311066376),
    ("2023-01-31T22:00:00Z",20333087352),
    ("2023-02-01T22:00:00Z",20368427396),
    ("2023-02-02T22:00:00Z",21257197107),
    ("2023-02-03T22:00:00Z",21270191314),
    ("2023-02-04T22:00:00Z",21329179746),
    ("2023-02-05T22:00:00Z",25627586213),
    ("2023-02-06T22:00:00Z",26090041825),
    ("2023-02-07T22:00:00Z",26008935848),
    ("2023-02-08T22:00:00Z",26891676584),
    ("2023-02-09T22:00:00Z",26856732434),
    ("2023-02-10T22:00:00Z",26959006463),
    ("2023-02-11T22:00:00Z",26775930776),
    ("2023-02-12T22:00:00Z",27019174392),
    ("2023-02-13T22:00:00Z",27028057062),
    ("2023-02-14T22:00:00Z",27065156551),
    ("2023-02-15T22:00:00Z",27158282380),
    ("2023-02-16T22:00:00Z",27164237669),
    ("2023-02-17T22:00:00Z",26633664800),
    ("2023-02-18T22:00:00Z",26739493374),
    ("2023-02-19T22:00:00Z",26844651497),
    ("2023-02-20T22:00:00Z",26919469015),
    ("2023-02-21T22:00:00Z",26818520930),
    ("2023-02-22T22:00:00Z",34480241348),
    ("2023-02-23T22:00:00Z",34345437683),
    ("2023-02-24T22:00:00Z",34264467030),
    ("2023-02-25T22:00:00Z",34273801512),
    ("2023-02-26T22:00:00Z",34389312762),
    ("2023-02-27T22:00:00Z",34791428590),
]
let data = rawData.map {
    (date: fmt.date(from: $0.0)!, size: $0.1 / 1e9)
}
print("items: \(data.count)")


struct Page: View {
    var body: some View {
        VStack(alignment: .leading) {
            Text("Swift Package Index")
                .font(.callout)
                .foregroundStyle(.secondary)
            Text("DocC S3 storage over time")
                .font(.title.bold())

            Text("Size")
                .font(.title2)
                .padding(.top)
            S3StorageChart()
        }
    }
}


struct S3StorageChart: View {
    var body: some View {
        Chart(data, id: \.date) {
            LineMark(
                x: .value("Date", $0.date),
                y: .value("Size / GB", $0.size)
            )
        }
        //  .chartXAxisLabel("Date", position: .bottom, alignment: .center)
        .chartYAxisLabel("Size / GB", position: .trailing, alignment: .center)
        .chartXAxis {
            AxisMarks(
                format: .verbatim("\(month: .abbreviated) \(year: .defaultDigits)",
                                  locale: .init(identifier: "en"),
                                  timeZone: .gmt,
                                  calendar: .current)
            )
        }
    }
}


PlaygroundPage.current.setLiveView(
    Canvas(page: Page(), filename: "docc-s3-storage", width: 600, height: 400)
)

